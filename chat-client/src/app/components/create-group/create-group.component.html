<div class="create-group-container">
    <h3>Create New Group</h3>

    <div class="form-group">
        <input [(ngModel)]="groupName" placeholder="Group Name" class="group-name-input" />
    </div>

    <div class="form-group">
        <input [(ngModel)]="searchQuery" (keyup)="searchUsers()" placeholder="Add Users eg: John, Jane"
            class="user-search-input" />
    </div>

    <!-- Selected Users Pills -->
    <div class="selected-users">
        <span *ngFor="let user of selectedUsers" class="user-pill">
            {{ user.username }}
            <span (click)="removeUser(user)" class="remove-icon">Ã—</span>
        </span>
    </div>

    <!-- Search Results -->
    <div class="search-results">
        <div *ngIf="searchResults.length === 0 && searchQuery.length > 0"
            style="padding: 10px; color: gray; text-align: center;">
            No users found matching "{{searchQuery}}"
        </div>
        <div *ngIf="searchResults.length === 0 && searchQuery.length === 0 && allUsers.length === 0"
            style="padding: 10px; color: gray; text-align: center;">
            No other users available.
        </div>
        <div *ngIf="searchResults.length === 0 && searchQuery.length === 0 && allUsers.length > 0 && selectedUsers.length > 0"
            style="padding: 10px; color: gray; text-align: center;">
            Use search to find more users.
        </div>

        <div *ngFor="let user of searchResults" (click)="addUser(user)" class="user-item">
            <div class="avatar">{{ user.username.charAt(0).toUpperCase() }}</div>
            <div class="user-info">
                <span class="username">{{ user.username | truncate:25 }}</span>
                <span style="font-size: 11px; color: gray; margin-left: 5px;">({{ user.email || 'User' }})</span>
            </div>
        </div>
    </div>

    <div class="actions">
        <button (click)="createGroup()" class="btn-primary" [disabled]="!groupName || selectedUsers.length < 1">
            Create Group
        </button>
        <button (click)="cancel()" class="btn-secondary">Cancel</button>
    </div>
</div>